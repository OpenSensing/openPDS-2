<!DOCTYPE html>
<html>
<head>
    <script src="data_sources.js"></script>
    <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.1/css/materialize.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.1/js/materialize.min.js"></script>

    <title>openPDS</title>
</head>
<script>

    $(document).ready(function () {
        getAllDataSources();
        // the "href" attribute of .modal-trigger must specify the modal ID that wants to be triggered
        $('.modal-trigger').leanModal({
                    in_duration: 100,
                    out_duration: 80
                }
        );
    });

</script>

<script id="dataSourcesList" type="text/template">
    <ul class="collapsible">
        {{#dataSources}}
        <li>
            <div class="collapsible-header">
                <span class="title">{{name}}</span>
                <a href="#" class="secondary-content" onclick="processRawDataSourceByName('{{name}}');">
                    <i class="material-icons">play_arrow</i>
                </a>

            </div>
            <div class="collapsible-body">

                <p>
                    <strong>Data types: </strong>
                    {{#dataTypes}}
                    {{name}}
                    {{/dataTypes}}
                    <br/>
                    <strong>Description</strong>: {{description}}
                    <br/>
                    <strong>Dropbox folder</strong>: {{dropboxFileLocation}}
                </p>
            </div>
        </li>
        {{/dataSources}}
    </ul>

</script>
<body>

<nav class="red" role="navigation">
    <div class="nav-wrapper container">
        <a id="logo-container" href="#" class="brand-logo">openPDS</a>
    </div>
</nav>
<ul class="tabs">
    <li class="tab col s3 "><a href="#test1" class="active red-text">Answer modules</a></li>
    <li class="tab col s3"><a href="#test2" class="red-text">Data sources</a></li>
</ul>
<div class="section no-pad-bot" id="index-banner">
    <div class="container">
        <br><br>

        <h3 class="header center red-text">Data sources</h3>


        <div id="dataSourcesContainer">

        </div>
        <button data-target="addDataSourceModal" class="btn-large waves-effect waves-light red modal-trigger">Install
            new...
        </button>
        <div id="addDataSourceModal" class="modal">
            <div class="modal-content">
                <h4>Add new data source</h4>

                <form id="newDataSourceForm">


                    <h5>Install local source</h5>

                    <div class="file-field input-field">
                        <div class="btn">
                            <span>File</span>
                            <input id="testPath" type="file" nwfile>
                        </div>
                        <div class="file-path-wrapper">
                            <input class="file-path validate" type="text"
                                   placeholder="Select data source config directory">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="submit" href="#!"
                                class="modal-action modal-close waves-effect waves-green btn-flat"
                                onclick="submitDataSourceForm()">Create
                        </button>
                    </div>
                </form>
            </div>
        </div>
        <br><br>

    </div>
</div>
</body>
</html>
